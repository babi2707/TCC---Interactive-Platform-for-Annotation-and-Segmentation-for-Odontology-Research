<div class="image-container">
    <div class="row-profile">
        <app-profile-symbol></app-profile-symbol>
    </div>

    <div class="row-text">
        <h2>Images for Dataset: {{ databaseName }}</h2>

        <div class="dropdown-wrapper">
            <span class="material-symbols-outlined" id="more-icon" (click)="toggleDatabaseDropdown(databaseId, $event)">
                more
            </span>

            <div class="database-dropdown" *ngIf="openDropdowns[databaseId]" appClickOutside
                (clickOutside)="closeDatabaseDropdown(databaseId)" (click)="$event.stopPropagation()">
                <button class="dropdown-item" (click)="navigateToDatabaseEdit(databaseId, $event)">
                    <span class="material-symbols-outlined">edit</span>
                    Edit Dataset
                </button>
                <mat-divider></mat-divider>
                <button class="dropdown-item">
                    <span class="material-symbols-outlined">download</span>
                    Download Dataset
                </button>
                <mat-divider></mat-divider>
                <button class="dropdown-item" (click)="openDeleteConfirmation(databaseId, $event)">
                    <span class="material-symbols-outlined">delete</span>
                    Delete Dataset
                </button>
            </div>
        </div>
    </div>

    <div *ngIf="isLoading">
        <p>Loading images...</p>
    </div>

    <div class="button-back">
        <a href="/database" class="login-link">Return to Databases List</a>
    </div>

    <div *ngIf="!isLoading && images.length === 0">
        <p>No images found for this database.</p>
    </div>

    <div *ngIf="!isLoading && images.length > 0" class="images-grid">
        <div *ngFor="let img of images" class="image-item" (click)="navigateToHomepage(img.id)">
            <img class="preview-image" [src]="getImageUrl(img.file_path)" alt="Image {{ img.id }}"
                (error)="onImageError($event, img)" (load)="onImageLoad($event, img)" />

            <div class="status-indicator" [ngClass]="{'edited': img.edited, 'not-edited': !img.edited}">
                <span class="status-text">{{ getImageStatusText(img) }}</span>
            </div>

            <!-- Badge para imagens editadas -->
            <div *ngIf="img.edited" class="edited-badge" title="Imagem editada">
                âœ“
            </div>
        </div>
    </div>
</div>